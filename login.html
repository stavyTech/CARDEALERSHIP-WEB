<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signup</title>
<link rel="stylesheet" href="main.css">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
</head>
<body>
    
<div class="container" style=" height: 90vh;">

    <div class="card" style=" width: 30rem; margin-top: 10rem; margin-left: 20rem;  ">
        <div class="card-body d-flex flex-column p-4 align-items-center justify-content-ce
        ">
            <h5 class="card-title" style="font-weight: 900;">Login</h5>
            <form class="w-80 d-flex flex-column align-items-center " >
                <div class="mb-3">
                  <label for="InputEmail" class="form-label">Email address</label>
                  <input type="email" class="form-control" id="inputEmail" aria-describedby="emailHelp">
                </div>
              
  <div class="mb-3">
                  <label for="InputEmail" class="form-label">Password</label>
                  <input type="password" class="form-control" id="inputpassword" aria-describedby="emailHelp">
                </div>

                <button class="btn p-2 bg-black rounded-4 text-white " type="submit">Login</button>

                <p class="text-center text-dark">or Login with</p>

  <button class="btn p-2 bg-black rounded-4 text-white " type="submit">Signup with Google</button>

   <p class="text-center text-dark">don't have an account? <a href="index.html">Signup</a></p>
</form>
    </div>
</div>




<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

     // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAP-hmqUnxe1FNaEAzzhUPE7YV0hk7d6p4",
    authDomain: "foodstore-85958.firebaseapp.com",
    projectId: "foodstore-85958",
    storageBucket: "foodstore-85958.firebasestorage.app",
    messagingSenderId: "289332451475",
    appId: "1:289332451475:web:d3d9f89b8f8f2013501566"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const provider = new GoogleAuthProvider();

    const email = document.getElementById('inputEmail');
    const password = document.getElementById('inputpassword');
    


    


    function login(){
        signInWithEmailAndPassword(auth, email.value, password.value)
        .then((userCredential) => {
            // Signed in 
            const user = userCredential.user;
            console.log(user);
            window.location.href = "dashboard.html";
            // ...
        })
        .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            console.log(errorMessage);
            alert(errorMessage);
            // ..
        });
    }

    document.querySelector('form').addEventListener('submit', (e) => {
        e.preventDefault();
        login();
    })

    function googlelogin(){
        signInWithPopup(auth, provider)
  .then((result) => {
    // This gives you a Google Access Token. You can use it to access the Google API.
    const credential = GoogleAuthProvider.credentialFromResult(result);
    const token = credential.accessToken;
    // The signed-in user info.
    const user = result.user;
    console.log(user);
    window.location.href = "dashboard.html";
    // ...
  }).catch((error) => {
    // Handle Errors here.
    const errorCode = error.code;
    const errorMessage = error.message;
    // The email of the user's account used.
    const email = error.customData.email;
    // The AuthCredential type that was used.
    const credential = GoogleAuthProvider.credentialFromError(error);
    // ...
  });
    }

    document.querySelectorAll('button')[1].addEventListener('click', (e) => {
        e.preventDefault();
        googlelogin();
    })
</script>

</body>
</html>